# 1-1 文件路径与文件编码
## 本章任务
- [ ] 掌握文件路径的使用
- [ ] 记住常见的文件编码
- [ ] 掌握IDEA的文件编码修改方式

## 文件路径

在计算机中，文件的存储是存储在指定路径下的。在Windows系统中，我们打开一个文件夹，在上面的地址栏中点击一下可以看到一串字符
![图 0](https://s2.loli.net/2023/09/18/DaNfpm6wTRrzunq.png)  
这里面的`D:\教程\Java-tutorial\Java-进阶`就是一个**绝对路径**。假如这个路径下面有一个文件叫A.txt，那么如何通过路径获取到这个文件呢？我们可以这样获取：`D:\教程\Java-tutorial\Java-进阶\A.txt`。接下来我们先讲一下路径的组成

## Windows系统下的绝对文件路径的组成
在不同操作系统中，文件路径的组成是不同的。这里介绍Windows系统的文件路径：

Windows系统中路径由以下结构组成：

```
盘符:\文件夹\子文件夹\子文件夹的子文件夹\...\文件
```

盘符就是从“此电脑”中看到的C盘、D盘、E盘等。文件夹就是打开某个盘第一眼看到的那些文件夹，子文件夹是打开某个文件夹后看到的那些文件夹。

## 相对路径

之前提到，像`D:\教程\Java-tutorial\Java-进阶`这种的路径是绝对路径，但在开发过程中使用相对路径居多。那么什么是相对路径呢？相对路径就是相对于当前路径的某个路径。比如，我现在进入到了`D:\教程\Java-tutorial\Java-进阶`这个路径的文件夹，我现在想要获取A.txt文件，那么此时就可以写`./A.txt`。这个`./A.txt`就是一个相对路径。这里`./`就标识当前路径下的xx。`./A.txt`就是当前路径（`D:\教程\Java-tutorial\Java-进阶`）下的`A.txt`文件

在这些路径中我们能看到有使用`\`和`/`分割文件夹，在Windows系统中两种可以混用，但在linux系统中则是能使用`/`。同样的在Java中也推荐使用`/`。当然Java中，`\`也可以使用。

基于相对路径也可以进行上一级（`../`）之类的操作。比如，当前依然在`D:\教程\Java-tutorial\Java-进阶`这个路径下，我现在想获取上一级文件夹中的B.txt文件，那么就可以输入`../B.txt`。

上一级过程可以多次使用，假设当前依然在`D:\教程\Java-tutorial\Java-进阶`这个路径下，那么`../../../`就是D盘根目录了。

首先第一个`../`来到了`D:\教程\Java-tutorial\`，第二个`../`来到了`D:\教程\`，第三个`../`来到了`D:\`。

## Java中文件操作的路径
还记得在定义`File`类对象时传入的字符串吗？
```java
File file=new File("a.txt");
```
在idea中，这个a.txt是指**在项目文件夹下的文件**a.txt。而在**非idea创建**的项目中，这个路径是指**与该文件同目录下的文件**a.txt。

## 乱码问题

在解决了文件路径的问题后在初次操作文件时会遇到乱码问题。这一切的罪魁祸首是字符编码。

这里会涉及以下几种软件的编码：
1. 文件编码
2. IDEA的文件编码和项目编码
3. 系统控制台的编码

在尝试理清上述这几种情景的编码前先了解一下为什么会有这些编码。

在计算机刚开始出现的时候只在美国流行，此时只需要让计算机存储26个字母和一些符号即可，这个标准在1967年被颁布，叫做ASCII。后来计算机要面向全世界，而让所有国家的人民都学习英文是一件不切实际的事情，因此就需要兼容各个国家的文字，而初始的字符编码只支持26个英文字母和一些符号，想要打出其他国家的文字是做不到的，这个时候就诞生了其他的文字编码。随着计算机的发展，现在已经有很多字符编码了。支持中文的文字编码有GB2312、GBK、UTF-8、BIG-5。其中GB2312是中国于1980年发布的，支持7000多个汉字，这些汉字都是常用字。BIG-5是针对繁体字的编码标准。而GBK在GB2312上进行扩展，已经支持上万的汉字。UTF-8则是现在被广泛使用的文字编码。其动态长度编码的设计使得它几乎兼容所有语言。在当今时代进行开发大多都是用这种编码。

那么了解了编码就需要知道乱码怎么来的。

当以一个编码保存了一个文件后使用另一个编码打开就会出现乱码问题。

比如这里有一个以GBK编码保存的文件GBK-F.txt，下面写了如下内容：

![图 1](https://s2.loli.net/2023/09/18/N4lnWZLmrbaqOGQ.png)  

我们使用UTF-8的编码打开：

![图 2](https://s2.loli.net/2023/09/18/lzvpiF9sSw746mI.png)  

此时我们可以看到乱码了。

大部分的乱码问题都是因为使用错误的编码打开文件导致的。那么我们如何解决这个问题呢？

此时就需要了解我们各个软件所使用的一些编码。总共有这三种：

1. 文件编码
2. IDEA的文件编码和项目编码
3. 系统控制台的编码

文件编码之前已经提到了，现在说一下IDEA中的编码。

IDEA中，文本编辑器和控制台所使用的编码是单独设置的。默认情况下，两者都是GBK。而系统控制台中的编码也是GBK编码。但是，如果使用GBK编码在后期的网络编程中会产生很多令人头大的乱码问题。因此我们需要修改IDEA的编码。

IDEA分为项目编码和文件编码两种，文件编码一般跟随项目编码即项目编码设置为UTF-8那么，**新建的文件**也会使用UTF-8编码。因此我们调整项目编码即可。而在IDEA中，设置又分为项目设置和全局设置。项目设置只针对于某个特定项目生效，全局设置是所有**新建的项目**都生效。这里直接一劳永逸更改全局设置。

首先我们退出正在打开的项目（如果没有正在打开的项目直接跳过这一步）。
如果使用IDEA的新UI看下面的两张图片，使用老UI看下面的第二张图片
![图 3](https://s2.loli.net/2023/09/19/NmorH5MK7bEJXpj.png)  
![图 4](https://s2.loli.net/2023/09/19/ONaLVPEzZeWifUy.png)  

关闭后，点击自定义->所有设置，搜索文件编码
![图 5](https://s2.loli.net/2023/09/19/rd86p7VuEMwoHNP.png)  

点击右侧然后点击全局编码右面的GBK，然后在下拉菜单中选择UTF-8.

![图 6](https://s2.loli.net/2023/09/19/phvrZnoQGSLiBRC.png)  

然后点击右下角的确定即可。这样以后所有新建的项目里面的文件都以UTF-8编码格式存储。打开文件也会使用UTF-8编码。