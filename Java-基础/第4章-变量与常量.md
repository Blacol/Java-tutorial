[TOC]
# 变量与常量

## 本章任务

- [ ] 了解Java中的基本数据类型
- [ ] 了解变量和常量的定义方法
- [ ] 掌握数据类型转换规则

## 基本数据类型

在学习变量和常量的知识前，先了解一下Java中的数据类型。数据类型是Java中最基础的东西，Java的开发绕不开基本数据类型，因此需要了解Java中都有哪些类型，它们都怎样存储数据。

Java中有两大数据类型种类，基本数据类型和引用数据类型，今天来介绍基本数据类型。
Java基本数据类型有以下8个：

1. 字节型（byte）
2. 短整型（short）
3. 整型（int）
4. 长整型（long）
5. 单精度浮点型（float）
6. 双精度浮点型（double）
7. 字符型（char）
8. 布尔型（boolean）

这八个数据类型所占用的大小、所能表示的范围都是不同的。

这八个类型的英语单词都是关键字。

### 字节型

占8位，占多少位可以理解成所需容量，只能表示$-2^7 \sim 2^7-1$的数字

### 短整型

占16位，能表示$-2^{15} \sim 2^{15}-1$的数字

### 整型

占32位，能表示$-2^{31} \sim 2^{31}-1$的数字

### 长整型

占64位，能表示$-2^{63} \sim 2^{63}-1$的数字

### 单精度浮点型和双精度浮点型

float占32位，所能表示的数的范围和int一样，double占64位数值范围和long一样，两者区别在于float能表示的小数精度比double低，但是，**无论是哪种类型它们所表示的小数有时候是不精确的**。这就意味着在数值敏感的场合并不适合使用浮点数存储数据，比如银行。

### 数值型数据类型的默认值

byte,short,int,long这四个整数型数据类型的默认值都是0。
double和float的默认值都是0.0

### 字符型

占16位，能表示的字符编码数值范围是$0\sim 65535$，默认值是`\u0000`。Java中使用Unicode码表示字符，它长这样：`\u1234`，`\u`是u码的开始标志，`1234`是十六进制数值，表示字符编码。在编译后会根据字符编码得到正确的字符。需要注意的是同一个字符编码在不同字符集中会得到不同的字符。

由于Java使用U码表示字符，所以其在变量命名中可以使用汉字命名。但是不推荐这么做，因为，可能会出现乱码。

字符型也可以和整型进行转换以及运算。

关于字符集的内容会放到后面去讲。

### 布尔型

只有真和假两个值，用于做逻辑判断。

## 数据类型转换

数据类型转换是未来开发中经常用到的功能。Java中有两种转换方法，一种是自动数据类型转换（也叫隐式转换），另一种是强制数据类型转换（也叫显式转换）。

![数据类型转换过程](https://s2.loli.net/2022/12/27/fvwDjLzolUcKVdH.png)
这个图片介绍了**自动数据类型转换（隐式转换)**的过程。只有**从占用空间小的类型转到占用空间大的类型**才会触发自动数据类型转换。

### 自动数据类型转换

比如：

```java
byte a=10;
short b=a;
```

在`b=a`时就发生了自动转换，将byte类型的a转换为了short类型的b

```java
short a=10;
char b=a;
```

报错，因为short无法转换为char

```java
char b=12;
```

正确，此时没有发生转化，因为char的本质就是数值，因此12是可以直接赋值过去的。

```java
char a=12;
short b=36;
int c=a+b;
```

正确，在进行a+b时将结果转换为了int并赋值给c因此，c的值为48。需要注意，**在Java中，short、byte、char这三个类型中只要发生了运算最后都会转换成int。**

```java
int a=7;
float b=3.3f;
float c=a+b;
```

正确，int和float相比，float最大，因此在进行运算时会将结果转换为float。

#### 总结：

1. 自动转换是小容量类型到大容量类型的自动转换过程
2. char类型不能和byte、short类型互相转换，但它们3个一起做运算或者两两做运算时就必须转换为int
3. char类型变量接受整型数值

### 强制数据类型转换

这种转换往往发生在大容量到小容量类型的转换。在做强制类型转换时会有一定风险，比如，转换失败、精度丢失等问题。因此，一般情况下不要产生这种转换。
强制数据类型转换（简称“强转”）可以通过`(类型)变量/表达式`来完成，如

```java
float a=3.3f;
int b=(int) a;
```

将a强制转换为int,int是整数，所以a的小数部分就被去掉了，最后b的值是3。

下面是初学者非常容易犯错的情景：

```java
float a=3.6f;
int b=7;
int c=(int)a+b;
int d=(int)b+a;
float e=(int)(a+b);
float f=(int)(b+a);
System.out.println(c);
System.out.println(e);
System.out.println(f);
```

这段代码无法执行，因为`(int)b+a`只将b进行转换，a不转换，所以最后结果是10.6属于浮点型，浮点型无法直接赋值给int型，因此报错。那如果将第四行注释掉，那么程序会正确的运行，结果是10,10.0,10.0。

对于第五行和第六行都是对a+b的结果进行强制类型转换，因此，无论a+b的结果是什么类型最后都会被转换为整数型。

对于基本数据类型中float类型的转换可以简单一些，比如上面代码中的`float a=3.6f`这就相当于是`float a=(float)3.6`（在Java中，直接输入小数是会被判定为double的，比如`float a=3.7`就是不正确的，因为3.7是double类型的，double类型值无法直接赋值给float类型）。

## 变量
**变量**就是数值可以变化的量。变量是存储在内存中的。**变量的本质是一个可操作的内存空间。**在程序运行中产生的数据都存储在内存中。之前有学到数据类型，变量存储什么类型的数据以及占用多少空间都围绕数据类型展开。

### 声明与定义

声明是**告知编译器有一个标识符**，定义则是**对这个标识符赋值**。

举例：

```java
int a;
int b=3;
```

这里`int a;`就是声明一个变量a，`int b=3`就是定义一个变量b。当然，**对于基本数据类型而言**声明也就相当于是定义。

### 变量的定义
**无论是变量还是常量，名称的命名必须遵守命名规则**
```
数据类型 变量名[=初始值];
```
`[]`里面的内容表示可选内容
举例：

```java
int a=7;
float b=3.3f;
char c;
```
如果定义一个基本数据类型的变量是可以不用给变量赋值的，但是，如果是引用数据类型，不赋值可能会导致空指针异常（NullPointerException）。关于引用数据类型在后面会讲到的。
### 变量的使用
```
变量名
```
举例：
```java
int a=7;
int c=a+3;//a+3就是对变量a的使用
```
有一点需要注意：**任何变量在使用前必须被声明。**
## 常量
**常量**是数值固定不变的量，在软件开发当中有大量用到常量的地方，比如公式中的固定量等等。
Java当中使用`final`关键字定义常量。**常量一旦被声明，它的值就不能再改变了。**

### 常量的定义
```
final 数据类型 常量名=初始值;
```
**常量一定要在声明时赋值。**
举例：
```java
final int A=0;
final int B=1;
```
使用：

```java
int result=A+B;//A+B是对常量A和常量B的引用
```