[TOC]

# 抽象类和接口

## 本章任务

- [ ] 掌握抽象类的特点以及使用
- [ ] 掌握接口的特点以及使用
- [ ] 能区分抽象类和接口

## 抽象类

抽象类是一种特殊的Java类，其特殊之处在于抽象类的方法是不能被实现的。

如果需要定义抽象类，可以使用`abstract`关键字修饰这个类。

比如：

```java
public abstract class Animals{
    public abstract String call();
    public abstract String food();
}
```

类`Animals`有两个方法，分别是`call()`和`food()`。这两个方法没有方法体。`Animals`类就是一个抽象类。为什么要这样设计？抽象类的目的是当父类的用途不确定时，可以将某个方法的实现留空，让该类的子类去实现对应的方法。这种情况常常发生在不同子类对于某个方法的实现各不相同时。就以下面这个需求为例：

“狗的叫声是汪汪，狗吃骨头，猫的叫声是喵喵，猫吃鱼。狗和猫都有体重和名字。用面向对象的方法描述这个需求。”

我们分析这个需求：狗和猫对于叫声和食物这个方法的实现是不一样的。我们可以使用两个类来分别描述这个需求，但这样的话每个类都要有名字和体重两个属性，这很麻烦。

如果我们使用继承的方式，那么父类的`call`方法和`eat`方法该怎么写？输出喵喵和汪汪吗？如果父类的`call`输出“喵喵”，然后狗继承了这个类并覆写了`call`方法，运行后可以输出“汪汪”这是没有问题的。但如果又增加了一个马，它的叫声是Her~~，而有一个程序员没有为马`Horse`类覆写`call()`方法，那么输出的结果就是“喵喵”，一只会喵喵叫的马，很奇怪，对吧？此时，抽象类的概念就出现了。我们可以通过Animals`类来实现这个功能。

```java
class abstract Animals{
    String name;
    double weight;
     public abstract void call();
     public abstract void food();
}
class Cat extends Animals{
     public void call(){
         return System.out.println("喵喵");
     }
     public void food(){
         return System.out.println(name+"要吃鱼");
     }
}
class Dog extends Animals{
     public void call(){
         return System.out.println("汪汪");
     }
     public void food(){
         return System.out.println(name+"要吃骨头");
     }
}
```

这样就可以满足上面的需求，让狗汪汪叫，让猫喵喵叫，狗吃骨头，猫吃鱼。哪怕后面还有马也可以让马发出正确的叫声。同时也不用担心程序员会忘记实现马的`call`方法。因为抽象类有一个性质——**抽象类的子类必须实现父类的抽象方法**。这样的话妈妈再也不用担心我会忘记覆写方法啦。

那么什么是抽象方法？使用`abstract`关键字声明的方法为抽象方法。抽象方法就是一个方法的声明，也可以说是没有方法体的方法。

那么有一个问题，如果抽象类没有子类，那么方法怎么实现的呢？答案是方法不会实现，程序也运行不起来（因为会报错）。这就是抽象类的第二个性质——**抽象类必须有实现类才可以被使用**。所谓实现类其实就是继承并实现抽象类中所有抽象方法的类。

除了上面的两个性质，抽象类还有如下的特点：

1. 抽象类里可以有非抽象方法，但该方法必须被实现。
2. 抽象类里可以有属性。
3. 抽象类不能创建对象。

总结一下，抽象类有如下几种特点：

1. 抽象类的子类必须实现父类的抽象方法，否则子类也必须是抽象类。
2. 抽象类不能创建对象。
3. 抽象类必须被**实现**才可以**使用**。
4. 抽象类中可以有非抽象方法，但该方法必须实现。
5. 抽象类中可以有成员。

## 接口

### 接口的定义和基本使用

接口是一种只有抽象方法的类。**接口要求所有的方法必须是公有且抽象的。**定义接口的语法如下：

```
[访问权限] interface 接口名{
	//方法
}
```

举例：

```java
public interface MyNumber{
    String show();
}
```

我们定义了一个`MyNumber`接口，该接口解决各种语言的本地化数字的显示。方法`show`就是用来显示数字的。`show`拥有**公有的权限**。这是由接口的性质决定的。同时，虽然`show`前面没有使用`abstract`进行修饰但`show`本质上是一个抽象方法。

那如果想要让`show`执行某些特定的功能怎么办？我们可以直接实现这个接口。实现接口通过`implements`关键字实现。

```java
public class ChineseNumber implements MyNumber{
    @Override
    public String show() {
        return "一";
    }
}
```

我们让`ChineseNumber`实现了接口`MyNumber`并重写了`show`方法，此时调用`ChineseNumber`的`show`方法就可以看到中文的数字一了。

接口支持多继承，**也就是说一个接口可以继承多个接口**。如果接口A继承自接口B和接口C，那么接口B和C是接口A的父接口，接口A是接口B和C的子接口。**一个类也可以实现多个接口**

接口和关键字有很多相似之处也有很多不同，此处是初学者最难以理解的部分，下面针对接口和抽象类之间的关系整理了一份表格以帮助初学者可以很好地了解抽象类和接口。

<table>
    <tr>
    	<th></th>
    	<th>抽象类</th>
    	<th>接口</th>
    </tr>
	<tr>
		<td>相同点</td>
        <td colspan=2>
            1.两者都拥有抽象方法且必须通过实现类创建对象<br>
        </td>
	</tr>
	<tr>
		<td>不同点</td>
		<td>1.抽象类允许非抽象方法存在<br>
            2.抽象类中允许成员变量存在<br>
            3.抽象类中的抽象方法必须是public或者protected权限
		</td>
        <td>1.接口中只能有抽象方法<br>
            2.接口中的抽象方法必须是public权限<br>
            3.接口不允许成员存在
        </td>
	</tr>
	<tr>
		<td>注意</td>
    	<td colspan=2>如果抽象类实现了接口，抽象类中对于接口中的方法要么声明为公有抽象交由子类实现要么直接实现接口中的抽象方法。</td>
	</tr>
</table>

